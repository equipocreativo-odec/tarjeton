<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tarjeta Consulta – Frente por la Vida (Ejercicio Pedagógico)</title>
  <style>
    /* Estilo sobrio, cercano a una tarjeta oficial para ejercicios pedagógicos */
    :root{
      --ink:#111827; --muted:#374151; --line:#d1d5db; --accent:#111827; --green:#198754; --warn:#b91c1c;
      --paper:#ffffff; --bg:#f3f4f6;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif}
    .sheet{max-width:980px;margin:28px auto;background:var(--paper);box-shadow:0 1px 20px rgba(0,0,0,.06);border:1px solid var(--line)}
    .hdr{display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid var(--ink);padding:18px 20px}
    .hdr h1{font-size:20px;line-height:1.25;margin:0;text-transform:uppercase;letter-spacing:.3px}
    .hdr small{color:var(--muted)}

    .notice{padding:12px 20px;border-bottom:1px solid var(--line);font-size:14px;color:var(--muted)}
    .notice b{color:var(--ink)}

    .grid{display:grid;gap:0;border-top:1px solid var(--line);border-left:1px solid var(--line);
      grid-template-columns: repeat(2, 1fr);
    }
    @media (max-width:700px){ .grid{grid-template-columns:1fr} }

    .cell{position:relative;min-height:240px;display:flex;flex-direction:column;gap:8px;padding:12px;border-right:1px solid var(--line);border-bottom:1px solid var(--line);cursor:pointer}
    .cell:focus{outline:3px solid #1d4ed81f}
    .cell.selected{box-shadow:inset 0 0 0 2px var(--ink)}

    .candidate-name{font-weight:800;text-align:center;margin-top:6px}
    .photo{flex:1 1 auto;display:flex;align-items:center;justify-content:center;background:#fafafa;border:1px solid var(--line);border-radius:6px;overflow:hidden}
    .photo img{max-width:100%;max-height:200px;object-fit:contain}

    .mark{position:absolute;inset:8px;display:none;place-items:center;pointer-events:none}
    .mark img{width:55%;max-width:240px;opacity:.95}
    .cell.selected .mark{display:grid}

    .foot{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:12px 20px;border-top:2px solid var(--ink)}
    .foot .rules{font-size:14px;color:var(--muted)}
    .meta{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
    .meta div{border:1px solid var(--line);height:42px}

    .controls{display:flex;gap:10px;flex-wrap:wrap}
    .btn{border:1px solid var(--ink);background:var(--ink);color:#fff;padding:10px 14px;font-weight:700;letter-spacing:.2px;cursor:pointer}
    .btn.secondary{background:transparent;color:var(--ink)}

    .sr{position:absolute;left:-9999px}
  </style>
  <script src="config.js"></script>
</head>
<body>
  <main class="sheet" role="application" aria-label="Tarjeta Consulta – Ejercicio Pedagógico">
    <header class="hdr">
      <h1>VOTO PARA LAS CONSULTAS — TARJETA DE EJERCICIO PEDAGÓGICO</h1>
      <small>Fecha referencial: 8 de marzo de 2026</small>
    </header>

    <div class="notice">
      <p><b>Instrucciones para votar (simulación):</b> Marque con una <b>X</b> el precandidato de su preferencia. <b>Marcar más de una opción anula el voto</b>. Este recurso es exclusivamente pedagógico.</p>
    </div>

    <section class="grid" role="radiogroup" aria-label="Seleccione una única opción" id="grid">
      <!-- Solo mostramos Nombre + Primer Apellido. El envío usa el nombre EXACTO del archivo -->

      <article class="cell" role="radio" tabindex="0" aria-checked="false" data-file="Daniel Quintero.png">
        <div class="photo"><img src="Daniel Quintero.png" alt="Daniel Quintero.png"></div>
        <div class="candidate-name">DANIEL QUINTERO</div>
        <div class="mark"><img src="X.png" alt="Marca X"></div>
      </article>

      <article class="cell" role="radio" tabindex="0" aria-checked="false" data-file="Edinson Torres.png">
        <div class="photo"><img src="Edinson Torres.png" alt="Edinson Torres.png"></div>
        <div class="candidate-name">EDISON TORRES</div>
        <div class="mark"><img src="X.png" alt="Marca X"></div>
      </article>

      <article class="cell" role="radio" tabindex="0" aria-checked="false" data-file="Hector Pineda.png">
        <div class="photo"><img src="Hector Pineda.png" alt="Hector Pineda.png"></div>
        <div class="candidate-name">HECTOR PINEDA</div>
        <div class="mark"><img src="X.png" alt="Marca X"></div>
      </article>

      <article class="cell" role="radio" tabindex="0" aria-checked="false" data-file="Roy Barreras.png">
        <div class="photo"><img src="Roy Barreras.png" alt="Roy Barreras.png"></div>
        <div class="candidate-name">ROY BARRERAS</div>
        <div class="mark"><img src="X.png" alt="Marca X"></div>
      </article>

      <article class="cell" role="radio" tabindex="0" aria-checked="false" data-file="Martha Bernal.png">
        <div class="photo"><img src="Martha Bernal.png" alt="Martha Bernal.png"></div>
        <div class="candidate-name">MARTHA BERNAL</div>
        <div class="mark"><img src="X.png" alt="Marca X"></div>
      </article>
    </section>

    <footer class="foot">
      <div class="rules"><b>Recuerde:</b> Marque una sola opción. Esta tarjeta es una simulación pedagógica.</div>
      <div class="controls">
        <button class="btn" id="btnEnviar" title="Registrar voto en hoja">Enviar voto</button>
        <button class="btn secondary" id="btnLimpiar" title="Limpiar selección">Limpiar</button>
      </div>
    </footer>

    <div class="sr" id="live" aria-live="polite"></div>
  </main>

  <script>
    const cells = Array.from(document.querySelectorAll('.cell'));
    const live = document.getElementById('live');

    function setSelected(cell){
      cells.forEach(c=>{const sel=(c===cell); c.classList.toggle('selected', sel); c.setAttribute('aria-checked', sel? 'true':'false');});
      announce('Opción seleccionada');
    }
    function selectedCell(){return cells.find(c=>c.classList.contains('selected'))||null}
    function selectedFile(){const c = selectedCell(); return c? c.dataset.file : null}
    function announce(msg){ live.textContent=''; setTimeout(()=> live.textContent = msg, 10); }

    cells.forEach(c=>{
      c.addEventListener('click', ()=> setSelected(c));
      c.addEventListener('keydown', (e)=>{
        if(e.key==='Enter' || e.key===' '){ e.preventDefault(); setSelected(c);}    
      });
    });

    document.getElementById('btnLimpiar').addEventListener('click', ()=>{
      cells.forEach(c=>{ c.classList.remove('selected'); c.setAttribute('aria-checked','false'); });
    });

    document.getElementById('btnEnviar').addEventListener('click', async ()=>{
      const file = selectedFile();
      if(!file){ alert('Primero seleccione una opción.'); return; }
      if(!window.SHEETS_ENDPOINT){ alert('Falta configurar SHEETS_ENDPOINT en config.js'); return; }
      try{
        const res = await fetch(window.SHEETS_ENDPOINT, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ filename:file, ts:new Date().toISOString() })});
        if(!res.ok) throw new Error('HTTP '+res.status);
        alert('Voto registrado: '+file);
      }catch(err){ alert('No se pudo registrar. Verifique config.js'); }
    });
  </script>
</body>
</html>